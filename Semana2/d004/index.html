<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Validações com form</title>


    <style>
        body {
            background-color: #616161;
            color: #fff;
            font-weight: bold;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        h2 {
            text-align: center;
            font-size: 2.5em;
        }

        .container {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 90vh;

        }

        form {
            display: flex;
            flex-direction: column;
            justify-content: center;
            width: 400px;
            gap: 15px;
            background-color: #464141;
            border-radius: 10px;
            padding: 20px;
        }

        input {
            border: none;
            padding: 10px;
            border-radius: 10px;
        }

        input:focus {
            outline: 1px solid chartreuse;
            border: 1px solid chartreuse;
        }

        button {
            border: none;
            padding: 10px;
            border-radius: 10px;
            cursor: pointer;
            margin-top: 20px;
            background-color: chartreuse;
        }

        #mensagem-sucesso {
            color: chartreuse;
            font-weight: bold;
            text-align: center;
        }

        input.erro {
            border: 2px solid red;
            color: red;
        }

        #erro-nome,
        #erro-email,
        #erro-senha,
        #erro-confirmar_senha {
            color: red;
            font-weight: lighter;
        }
    </style>

</head>

<body>
    <div class="container">
        <form id="formulario">
            <h2>Cadastro</h2>
            <input type="text" id="nome" minlength="3" placeholder="Seu nome" onkeydown="typing()">
            <small class="erro" id="erro-nome"></small>

            <input type="email" id="email" placeholder="Email">
            <small class="erro" id="erro-email"></small>

            <input type="password" id="senha" minlength="6" placeholder="Senha">
            <small class="erro" id="erro-senha"></small>

            <input type="password" id="confirmar_senha" placeholder="Confirmar senha" />
            <small class="erro" id="erro-confirmar_senha"></small>

            <button type="submit">Cadastrar</button>
        </form>
    </div>

    <p id="mensagem-sucesso"></p>


    <script>

        const form = document.querySelector('#formulario');
        const messageSucess = document.querySelector('#mensagem-sucesso')
        let isValid = false;

        form.addEventListener("submit", (e) => {
            e.preventDefault();

            //Validate Name

            const name = document.querySelector('#nome');
            const nameError = document.querySelector('#erro-nome');

            document.addEventListener('keydown', () => {
                name.classList.remove('erro');
                nameError.textContent = ''
            });

            if (name.value == '') {
                nameError.textContent = 'Preencha o campo.'
                name.classList.add('erro')
                isValid = false;
            } else if (name.value.length <= 3) {
                nameError.textContent = 'Minimo 3 letras.'
                name.classList.add('erro')
                isValid = false;
            } else {
                nameError.textContent = ''
                name.classList.remove('erro')
                isValid = true;
            }

            //validate Email

            const email = document.querySelector('#email');
            const emailError = document.querySelector('#erro-email');
            const emailValid = email.value.includes("@") && email.value.includes(".");

            document.addEventListener('keydown', () => {
                email.classList.remove('erro');
                emailError.textContent = ''
            });

            if (email.value == '') {
                emailError.textContent = 'Preencha o campo.';
                email.classList.add('erro');
                isValid = false;
            } else if (!emailValid) {
                emailError.textContent = 'Inclua "@"" e "." no seu endereço.';
                email.classList.add('erro');
                isValid = false;
            } else {
                emailError.textContent = ''
                email.classList.remove('erro');
                isValid = true;
            }

            // Validate Password

            const Password = document.querySelector('#senha');
            const PasswordError = document.querySelector('#erro-senha');

            document.addEventListener('keydown', () => {
                Password.classList.remove('erro');
                PasswordError.textContent = ''
            });

            if (Password.value == '') {
                PasswordError.textContent = 'Preencha o campo.';
                Password.classList.add('erro');
                isValid = false;
            } else if (Password.value.length < 6) {
                PasswordError.textContent = 'Minimo 7 letras.';
                Password.classList.add('erro');
                isValid = false;
            } else {
                PasswordError.textContent = ''
                Password.classList.remove('erro');
                isValid = true;
            }

            // Validate senhas iguais

            const confirmPassword = document.querySelector('#confirmar_senha');
            const erroConfirmarPassword = document.querySelector('#erro-confirmar_senha');

            document.addEventListener('keydown', () => {
                confirmPassword.classList.remove('erro');
                erroConfirmarPassword.textContent = ''
            });

            if (confirmPassword.value == '') {
                erroConfirmarPassword.textContent = 'Preencha o campo.';
                confirmPassword.classList.add('erro');
                isValid = false;
            } else if (Password.value != confirmPassword.value) {
                erroConfirmarPassword.textContent = 'Senhas diferentes! Tente novamente.';
                confirmPassword.classList.add('erro');
                isValid = false;
            } else {
                erroConfirmarPassword.textContent = ''
                confirmPassword.classList.remove('erro')
                isValid = true;
            }

            // valide se tudo estiver certo

            if (isValid) {
                messageSucess.textContent = 'Cadastro realizado com sucesso!'
                form.reset();
            } else {
                messageSucess.textContent = ''
            }

        })

    </script>
</body>

</html>